# èŒåœºæƒ…ç»ªå……ç”µç«™ Agent å“åº”æ ¼å¼è§„èŒƒ

## æ¦‚è¿°

æœ¬æ–‡æ¡£å®šä¹‰äº†èŒåœºæƒ…ç»ªå……ç”µç«™ Agent çš„æ ‡å‡†å“åº”æ ¼å¼ï¼Œç¡®ä¿å‰ç«¯èƒ½å¤Ÿæ­£ç¡®è§£æå’Œå¤„ç† Agent è¿”å›çš„æ•°æ®ã€‚

## å“åº”çŠ¶æ€ç 

æ‰€æœ‰å“åº”å¿…é¡»åŒ…å«æ˜ç¡®çš„ `status` å­—æ®µï¼Œä½¿ç”¨ä»¥ä¸‹çŠ¶æ€ç ï¼š

| çŠ¶æ€ç  | è¯´æ˜ | ä½¿ç”¨åœºæ™¯ |
|--------|------|----------|
| `success` | æ“ä½œæˆåŠŸå®Œæˆ | ç”¨æˆ·è¯·æ±‚æˆåŠŸï¼Œè¿”å›æ­£å¸¸æ•°æ® |
| `failed` | æ“ä½œå¤±è´¥ | å·¥å…·æ‰§è¡Œå¤±è´¥ã€è¾“å…¥é”™è¯¯ã€API é”™è¯¯ç­‰ |
| `loading` | æ“ä½œæ­£åœ¨è¿›è¡Œä¸­ | é•¿æ—¶é—´æ“ä½œï¼Œæç¤ºç”¨æˆ·ç­‰å¾… |

## æˆåŠŸå“åº”æ ¼å¼

### åŸºç¡€ç»“æ„

```json
{
  "status": "success",
  "data": {
    "content": "ä¸»è¦å›å¤å†…å®¹ï¼ˆMarkdownæ ¼å¼ï¼‰",
    "thinking": "æ€è€ƒè¿‡ç¨‹ï¼ˆå¯é€‰ï¼‰",
    "metadata": {
      "action": "æ‰§è¡Œçš„actionç±»å‹",
      "tools_used": ["ä½¿ç”¨çš„å·¥å…·åˆ—è¡¨"],
      "additional_info": {}
    }
  }
}
```

### å­—æ®µè¯´æ˜

#### status
- **ç±»å‹**: `string`
- **å¿…å¡«**: æ˜¯
- **å€¼**: `"success"` | `"failed"` | `"loading"`
- **è¯´æ˜**: æ“ä½œçŠ¶æ€æ ‡è¯†

#### data
- **ç±»å‹**: `object`
- **å¿…å¡«**: æ˜¯
- **è¯´æ˜**: å“åº”æ•°æ®å¯¹è±¡ï¼Œä»…åœ¨ status ä¸º `success` æ—¶å­˜åœ¨

##### content
- **ç±»å‹**: `string`
- **å¿…å¡«**: æ˜¯
- **è¯´æ˜**: ä¸»è¦å›å¤å†…å®¹ï¼Œä½¿ç”¨ Markdown æ ¼å¼

##### thinking
- **ç±»å‹**: `string`
- **å¿…å¡«**: å¦
- **è¯´æ˜**: Agent çš„æ€è€ƒè¿‡ç¨‹ï¼Œå‰ç«¯å¯é€‰æ‹©æ˜¯å¦å±•ç¤º

##### metadata
- **ç±»å‹**: `object`
- **å¿…å¡«**: å¦
- **è¯´æ˜**: å…ƒæ•°æ®ä¿¡æ¯

###### action
- **ç±»å‹**: `string`
- **è¯´æ˜**: æ‰§è¡Œçš„ action ç±»å‹ï¼Œå¦‚ï¼š`welcome_user`ã€`generate_report`ã€`answer_question`

###### tools_used
- **ç±»å‹**: `array<string>`
- **è¯´æ˜**: ä½¿ç”¨çš„å·¥å…·åˆ—è¡¨ï¼Œå¦‚ï¼š`["check_user_info_exists", "bazi_api_analysis"]`

###### additional_info
- **ç±»å‹**: `object`
- **è¯´æ˜**: å…¶ä»–é™„åŠ ä¿¡æ¯

### æˆåŠŸå“åº”ç¤ºä¾‹

#### ç¤ºä¾‹ 1ï¼šé¦–æ¬¡æ¥è®¿ï¼Œæ¬¢è¿ç”¨æˆ·

```json
{
  "status": "success",
  "data": {
    "content": "ğŸŒŸ æ¬¢è¿æ¥åˆ°èŒåœºæƒ…ç»ªå……ç”µç«™ï¼ğŸŒŸ\n\næˆ‘æ˜¯ä½ çš„ä¸“å±èŒåœºå¯¼å¸ˆï¼Œå°†ä¸ºä½ æä¾›å‘½ç†åˆ†æã€èŒåœºå»ºè®®ã€MBTIæ€§æ ¼åˆ†æå’Œæƒ…ç»ªæ”¯æŒæœåŠ¡ã€‚\n\nä¸ºäº†ç»™ä½ æä¾›æœ€è´´å¿ƒçš„ä¸ªæ€§åŒ–æœåŠ¡ï¼Œè¯·å‘Šè¯‰æˆ‘ä»¥ä¸‹ä¿¡æ¯ï¼š\n\nğŸ“‹ ã€åŸºæœ¬ä¿¡æ¯ã€‘\n1. ä½ çš„å§“åï¼ˆå¯ä»¥åªå‘Šè¯‰æˆ‘æ˜µç§°ï¼‰*\n2. ä½ çš„æ€§åˆ«ï¼ˆç”·/å¥³ï¼‰*\n3. MBTIç±»å‹ï¼ˆå¯é€‰ï¼Œå¦‚INTJã€ENFPï¼‰\n\nğŸ¯ ã€å‘½ç†ä¿¡æ¯ã€‘ï¼ˆç”¨äºè¿åŠ¿åˆ†æï¼‰\n4. å‡ºç”Ÿå¹´æœˆæ—¥æ—¶ï¼ˆå¦‚ï¼š1990å¹´03æœˆ15æ—¥08æ—¶ï¼‰*\n5. å‡ºç”Ÿåœ°ç†ä½ç½®ï¼ˆå¦‚ï¼šåŒ—äº¬ï¼Œå¯ç•™ç©ºä½¿ç”¨å½“å‰ä½ç½®ï¼‰\n\nğŸ’¼ ã€èŒåœºä¿¡æ¯ã€‘ï¼ˆç”¨äºèŒä¸šå»ºè®®ï¼Œå¯ç¼ºçœï¼‰\n6. å½“å‰åœ°ç†ä½ç½®ï¼ˆç”¨äºå¤©æ°”å’Œç©¿æ­å»ºè®®ï¼‰*\n7. å…¬å¸åç§°ï¼ˆå¦‚ï¼šè…¾è®¯ã€é˜¿é‡Œå·´å·´ï¼Œå¯é€‰ï¼‰\n8. å…¬å¸ç±»å‹ï¼ˆå¦‚ï¼šå›½ä¼ã€ç§ä¼ã€å¤–ä¼ã€äº’è”ç½‘ã€é‡‘èç­‰ï¼Œå¯é€‰ï¼‰\n9. èŒä½ç±»å‹ï¼ˆå¦‚ï¼šäº§å“ç»ç†ã€è½¯ä»¶å·¥ç¨‹å¸ˆã€è¿è¥ç­‰ï¼Œå¯é€‰ï¼‰\n10. èŒçº§ï¼ˆå¦‚ï¼šP6ã€P7ã€é«˜çº§ã€ç»ç†ç­‰ï¼Œå¯é€‰ï¼‰",
    "thinking": "ç”¨æˆ·é¦–æ¬¡è®¿é—®ï¼Œéœ€è¦å¼•å¯¼ç”¨æˆ·å½•å…¥åŸºæœ¬ä¿¡æ¯ã€‚æŒ‰ç…§æ¬¢è¿è¯­æ¨¡æ¿å±•ç¤ºå¿…å¡«é¡¹å’Œå¯é€‰é¡¹ã€‚",
    "metadata": {
      "action": "welcome_user",
      "user_status": "new_user",
      "tools_used": []
    }
  }
}
```

#### ç¤ºä¾‹ 2ï¼šç”Ÿæˆå®Œæ•´æŠ¥å‘Š

```json
{
  "status": "success",
  "data": {
    "content": "ğŸ¯ ã€æˆ‘çš„äººç”Ÿè§£è¯»ã€‘\n\n[å…«å­—åˆ†æå†…å®¹]\n\n---\n\nâœ¨ ã€æ¯æ—¥è¿åŠ¿ã€‘\n\n[ä»Šæ—¥è¿åŠ¿å†…å®¹]\n\n---\n\nğŸ’¼ ã€èŒåœºå¤§åŠ¿ã€‘\n\n[èŒåœºåˆ†æå†…å®¹]\n\n---\n\nğŸ‘” ã€æ¯æ—¥ç©¿æ­ã€‘\n\n[ç©¿æ­å»ºè®®å†…å®¹ - æ–‡å­—æè¿°]",
    "thinking": "å·²è·å–ç”¨æˆ·å…«å­—ã€å¤©æ°”ã€èŒåœºç­‰ä¿¡æ¯ï¼Œç”Ÿæˆå®Œæ•´çš„å››æ¿å—æŠ¥å‘Šã€‚",
    "metadata": {
      "action": "generate_report",
      "user_status": "returning_user",
      "tools_used": [
        "check_user_info_exists",
        "bazi_api_analysis",
        "get_weather",
        "career_advice"
      ]
    }
  }
}
```

#### ç¤ºä¾‹ 3ï¼šç®€å•é—®ç­”

```json
{
  "status": "success",
  "data": {
    "content": "æ ¹æ®ä½ çš„MBTIç±»å‹INTJï¼Œä½ æ˜¯ä¸€ä¸ªå–„äºç‹¬ç«‹æ€è€ƒã€æ³¨é‡é€»è¾‘å’Œç­–ç•¥çš„äººã€‚åœ¨å·¥ä½œä¸­ï¼Œä½ é€šå¸¸å–œæ¬¢æ·±å…¥åˆ†æé—®é¢˜ï¼Œåˆ¶å®šé•¿æœŸè§„åˆ’ã€‚\n\nå»ºè®®ï¼š\n1. å°è¯•å°†ä½ çš„æƒ³æ³•æ¸…æ™°åœ°ä¼ è¾¾ç»™å›¢é˜Ÿæˆå‘˜\n2. åœ¨å†³ç­–æ—¶è€ƒè™‘ä»–äººçš„æƒ…æ„Ÿéœ€æ±‚\n3. ç»™è‡ªå·±è®¾å®šä¸€äº›å¯å®ç°çš„çŸ­æœŸç›®æ ‡",
    "thinking": "ç”¨æˆ·è¯¢é—®MBTIç›¸å…³å»ºè®®ï¼Œæ ¹æ®ç”¨æˆ·æä¾›çš„INTJç±»å‹ï¼Œæä¾›é’ˆå¯¹æ€§çš„æ€§æ ¼åˆ†æå’Œå»ºè®®ã€‚",
    "metadata": {
      "action": "answer_question",
      "question_type": "mbti_advice",
      "tools_used": []
    }
  }
}
```

## å¤±è´¥å“åº”æ ¼å¼

### åŸºç¡€ç»“æ„

```json
{
  "status": "failed",
  "error_code": "é”™è¯¯ä»£ç ",
  "error_message": "ç”¨æˆ·å‹å¥½çš„é”™è¯¯æè¿°",
  "details": {
    "tool_name": "å‡ºé”™çš„å·¥å…·åç§°",
    "raw_error": "åŸå§‹é”™è¯¯ä¿¡æ¯"
  }
}
```

### å­—æ®µè¯´æ˜

#### error_code
- **ç±»å‹**: `string`
- **å¿…å¡«**: æ˜¯
- **è¯´æ˜**: é”™è¯¯ä»£ç ï¼Œè¯¦è§ä¸‹æ–‡é”™è¯¯ç å®šä¹‰

#### error_message
- **ç±»å‹**: `string`
- **å¿…å¡«**: æ˜¯
- **è¯´æ˜**: ç”¨æˆ·å‹å¥½çš„é”™è¯¯æè¿°ï¼Œä¾¿äºå±•ç¤ºç»™ç”¨æˆ·

#### details
- **ç±»å‹**: `object`
- **å¿…å¡«**: å¦
- **è¯´æ˜**: é”™è¯¯è¯¦ç»†ä¿¡æ¯

### é”™è¯¯ç å®šä¹‰

| é”™è¯¯ç  | è¯´æ˜ | å…¸å‹åœºæ™¯ |
|--------|------|----------|
| `TOOL_EXECUTION_ERROR` | å·¥å…·æ‰§è¡Œå¤±è´¥ | å¤–éƒ¨APIè°ƒç”¨å¤±è´¥ã€å·¥å…·æ‰§è¡Œè¶…æ—¶ |
| `INVALID_INPUT` | ç”¨æˆ·è¾“å…¥æ— æ•ˆ | ç”¨æˆ·æä¾›çš„å‚æ•°æ ¼å¼é”™è¯¯ã€å‚æ•°ç±»å‹ä¸åŒ¹é… |
| `MISSING_INFO` | ç¼ºå°‘å¿…è¦ä¿¡æ¯ | ç”¨æˆ·æœªæä¾›å¿…éœ€çš„å§“åã€å‡ºç”Ÿæ—¥æœŸç­‰ä¿¡æ¯ |
| `API_ERROR` | å¤–éƒ¨APIè°ƒç”¨å¤±è´¥ | å¤©æ°”APIã€å…«å­—APIè°ƒç”¨å¤±è´¥ |
| `DATABASE_ERROR` | æ•°æ®åº“æ“ä½œå¤±è´¥ | ä¿å­˜æ•°æ®ã€è¯»å–æ•°æ®å¤±è´¥ |
| `UNKNOWN_ERROR` | æœªçŸ¥é”™è¯¯ | å…¶ä»–æœªæ˜ç¡®åˆ†ç±»çš„é”™è¯¯ |

### å¤±è´¥å“åº”ç¤ºä¾‹

#### ç¤ºä¾‹ 1ï¼šç¼ºå°‘å¿…è¦ä¿¡æ¯

```json
{
  "status": "failed",
  "error_code": "MISSING_INFO",
  "error_message": "ç¼ºå°‘å¿…è¦çš„å‘½ç†ä¿¡æ¯ï¼Œè¯·æä¾›ä½ çš„å‡ºç”Ÿå¹´æœˆæ—¥æ—¶",
  "details": {
    "required_fields": ["birth_date"],
    "user_input": "ç”¨æˆ·æœªæä¾›å‡ºç”Ÿæ—¥æœŸ"
  }
}
```

#### ç¤ºä¾‹ 2ï¼šå·¥å…·æ‰§è¡Œå¤±è´¥

```json
{
  "status": "failed",
  "error_code": "TOOL_EXECUTION_ERROR",
  "error_message": "å·¥å…·æ‰§è¡Œå¤±è´¥: bazi_api_analysis",
  "details": {
    "tool_name": "bazi_api_analysis",
    "raw_error": "API rate limit exceeded"
  }
}
```

#### ç¤ºä¾‹ 3ï¼šæ— æ•ˆè¾“å…¥

```json
{
  "status": "failed",
  "error_code": "INVALID_INPUT",
  "error_message": "MBTIç±»å‹æ— æ•ˆï¼Œè¯·æä¾›æ­£ç¡®çš„16ç§MBTIç±»å‹ä¹‹ä¸€ï¼ˆå¦‚INTJã€ENFPç­‰ï¼‰",
  "details": {
    "field": "mbti",
    "user_input": "XYZ",
    "valid_values": ["INTJ", "INTP", "ENTJ", "ENTP", "INFJ", "INFP", "ENFJ", "ENFP", "ISTJ", "ISFJ", "ESTJ", "ESFJ", "ISTP", "ISFP", "ESTP", "ESFP"]
  }
}
```

## Loading çŠ¶æ€æ ¼å¼

### åŸºç¡€ç»“æ„

```json
{
  "status": "loading",
  "data": {
    "message": "æç¤ºä¿¡æ¯",
    "progress": "è¿›åº¦ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰",
    "estimated_time": "é¢„è®¡å‰©ä½™æ—¶é—´ï¼ˆå¯é€‰ï¼Œå•ä½ï¼šç§’ï¼‰"
  }
}
```

### Loading ç¤ºä¾‹

```json
{
  "status": "loading",
  "data": {
    "message": "æ­£åœ¨ä¸ºæ‚¨ç”Ÿæˆä¸ªæ€§åŒ–æŠ¥å‘Š...",
    "progress": "å·²å®Œæˆ 2/4 æ­¥éª¤",
    "estimated_time": 30
  }
}
```

## å‰ç«¯é›†æˆå»ºè®®

### 1. å“åº”è§£ææµç¨‹

```javascript
// ä¼ªä»£ç ç¤ºä¾‹
async function handleAgentResponse(response) {
  // 1. è§£æ JSON
  const data = JSON.parse(response);
  
  // 2. æ ¹æ® status å­—æ®µå¤„ç†
  switch(data.status) {
    case 'success':
      // å±•ç¤ºä¸»è¦å†…å®¹
      displayContent(data.data.content);
      // å¯é€‰ï¼šå±•ç¤ºæ€è€ƒè¿‡ç¨‹
      if (data.data.thinking) {
        displayThinking(data.data.thinking);
      }
      break;
      
    case 'failed':
      // å±•ç¤ºé”™è¯¯ä¿¡æ¯
      displayError(data.error_message);
      // å¯é€‰ï¼šè®°å½•è¯¦ç»†é”™è¯¯
      logError(data);
      break;
      
    case 'loading':
      // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
      showLoading(data.data.message);
      break;
  }
}
```

### 2. é”™è¯¯å¤„ç†å»ºè®®

- **TOOL_EXECUTION_ERROR**: æç¤ºç”¨æˆ·ç¨åé‡è¯•ï¼Œæˆ–å°è¯•ä½¿ç”¨å¤‡ç”¨åŠŸèƒ½
- **INVALID_INPUT**: æŒ‡å¯¼ç”¨æˆ·ä¿®æ­£è¾“å…¥æ ¼å¼
- **MISSING_INFO**: å¼•å¯¼ç”¨æˆ·æä¾›ç¼ºå¤±çš„ä¿¡æ¯
- **API_ERROR**: æç¤ºç”¨æˆ·ç½‘ç»œé—®é¢˜ï¼Œå»ºè®®é‡è¯•
- **DATABASE_ERROR**: æç¤ºç”¨æˆ·ç³»ç»Ÿé”™è¯¯ï¼Œç¨åé‡è¯•
- **UNKNOWN_ERROR**: æç¤ºç”¨æˆ·é‡åˆ°æœªçŸ¥é”™è¯¯ï¼Œè¯·è”ç³»å®¢æœ

### 3. UI å±•ç¤ºå»ºè®®

#### æˆåŠŸå“åº”
- ä¸»è¦å†…å®¹ï¼ˆcontentï¼‰å±•ç¤ºåœ¨å¯¹è¯æ¡†æˆ–å†…å®¹åŒºåŸŸ
- æ€è€ƒè¿‡ç¨‹ï¼ˆthinkingï¼‰å¯å±•ç¤ºåœ¨æŠ˜å åŒºåŸŸæˆ–å¼€å‘è€…æ¨¡å¼
- metadata å¯ç”¨äºç»Ÿè®¡å’Œåˆ†æ

#### å¤±è´¥å“åº”
- é”™è¯¯ä¿¡æ¯ä½¿ç”¨é†’ç›®çš„é¢œè‰²ï¼ˆå¦‚çº¢è‰²ï¼‰å±•ç¤º
- æä¾›é‡è¯•æŒ‰é’®æˆ–è¿”å›ä¸Šä¸€æ­¥çš„é€‰é¡¹
- å¯ç‚¹å‡»æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯ï¼ˆdetailsï¼‰

#### Loading çŠ¶æ€
- æ˜¾ç¤ºè¿›åº¦æ¡æˆ–åŠ è½½åŠ¨ç”»
- å±•ç¤ºè¿›åº¦ä¿¡æ¯ï¼ˆå¦‚"å·²å®Œæˆ 2/4 æ­¥éª¤"ï¼‰
- æ˜¾ç¤ºé¢„è®¡å‰©ä½™æ—¶é—´ï¼ˆå¦‚æœ‰ï¼‰

### 4. å…¼å®¹æ€§å¤„ç†

ç”±äº Agent å¯èƒ½ä¼šè¿”å›é JSON æ ¼å¼çš„å“åº”ï¼ˆå¦‚çº¯æ–‡æœ¬ï¼‰ï¼Œå‰ç«¯éœ€è¦åšå…¼å®¹å¤„ç†ï¼š

```javascript
async function safeParseResponse(response) {
  try {
    // å°è¯•è§£æä¸º JSON
    const data = JSON.parse(response);
    
    // éªŒè¯æ˜¯å¦åŒ…å« status å­—æ®µ
    if (!data.status) {
      // å¦‚æœæ²¡æœ‰ status å­—æ®µï¼Œè½¬æ¢ä¸ºæ ‡å‡†æ ¼å¼
      return {
        status: 'success',
        data: {
          content: response,
          thinking: '',
          metadata: {}
        }
      };
    }
    
    return data;
  } catch (e) {
    // è§£æå¤±è´¥ï¼Œè¿”å›çº¯æ–‡æœ¬å“åº”
    return {
      status: 'success',
      data: {
        content: response,
        thinking: '',
        metadata: {}
      }
    };
  }
}
```

## æµ‹è¯•ç”¨ä¾‹

### æµ‹è¯•ç”¨ä¾‹ 1ï¼šé¦–æ¬¡æ¥è®¿æˆåŠŸ

**è¾“å…¥**: ç”¨æˆ·é¦–æ¬¡è®¿é—®

**é¢„æœŸè¾“å‡º**:
```json
{
  "status": "success",
  "data": {
    "content": "ğŸŒŸ æ¬¢è¿æ¥åˆ°èŒåœºæƒ…ç»ªå……ç”µç«™ï¼ğŸŒŸ\n\n...",
    "thinking": "ç”¨æˆ·é¦–æ¬¡è®¿é—®...",
    "metadata": {
      "action": "welcome_user",
      "user_status": "new_user",
      "tools_used": []
    }
  }
}
```

### æµ‹è¯•ç”¨ä¾‹ 2ï¼šç¼ºå°‘å‡ºç”Ÿæ—¥æœŸ

**è¾“å…¥**: ç”¨æˆ·åªæä¾›å§“åå’Œæ€§åˆ«ï¼Œæœªæä¾›å‡ºç”Ÿæ—¥æœŸ

**é¢„æœŸè¾“å‡º**:
```json
{
  "status": "failed",
  "error_code": "MISSING_INFO",
  "error_message": "ç¼ºå°‘å¿…è¦çš„å‘½ç†ä¿¡æ¯ï¼Œè¯·æä¾›ä½ çš„å‡ºç”Ÿå¹´æœˆæ—¥æ—¶",
  "details": {
    "required_fields": ["birth_date"],
    "user_input": "ç”¨æˆ·æœªæä¾›å‡ºç”Ÿæ—¥æœŸ"
  }
}
```

### æµ‹è¯•ç”¨ä¾‹ 3ï¼šç”ŸæˆæŠ¥å‘ŠæˆåŠŸ

**è¾“å…¥**: ç”¨æˆ·æä¾›äº†å®Œæ•´ä¿¡æ¯ï¼Œè¦æ±‚ç”ŸæˆæŠ¥å‘Š

**é¢„æœŸè¾“å‡º**:
```json
{
  "status": "success",
  "data": {
    "content": "ğŸ¯ ã€æˆ‘çš„äººç”Ÿè§£è¯»ã€‘\n\n...",
    "thinking": "å·²è·å–ç”¨æˆ·å…«å­—...",
    "metadata": {
      "action": "generate_report",
      "user_status": "new_user",
      "tools_used": [
        "add_roster_entry",
        "bazi_api_analysis",
        "get_weather",
        "career_advice"
      ]
    }
  }
}
```

## ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | è¯´æ˜ |
|------|------|------|
| 1.0 | 2025-01-15 | åˆå§‹ç‰ˆæœ¬ï¼Œå®šä¹‰åŸºç¡€å“åº”æ ¼å¼ |

## é™„å½•

### A. å®Œæ•´çš„é”™è¯¯ç åˆ—è¡¨

è¯¦è§ä¸Šæ–‡é”™è¯¯ç å®šä¹‰éƒ¨åˆ†ã€‚

### B. å¸¸è§é—®é¢˜

**Q1: å¦‚æœ Agent è¿”å›çš„ JSON æ ¼å¼ä¸æ­£ç¡®æ€ä¹ˆåŠï¼Ÿ**

A: å‰ç«¯åº”åšå…¼å®¹å¤„ç†ï¼Œå°†é JSON å“åº”è½¬æ¢ä¸ºæ ‡å‡†æ ¼å¼ï¼Œå‚è€ƒ"å…¼å®¹æ€§å¤„ç†"éƒ¨åˆ†ã€‚

**Q2: thinking å­—æ®µæ˜¯å¦å¿…é¡»å±•ç¤ºï¼Ÿ**

A: ä¸å¼ºåˆ¶ï¼Œå‰ç«¯å¯æ ¹æ®äº§å“éœ€æ±‚å†³å®šæ˜¯å¦å±•ç¤ºã€‚å»ºè®®åœ¨å¼€å‘è€…æ¨¡å¼æˆ–æŠ˜å åŒºåŸŸå±•ç¤ºã€‚

**Q3: å¦‚ä½•å¤„ç†é•¿æ—¶é—´æ“ä½œï¼Ÿ**

A: Agent å¯èƒ½ä¼šè¿”å› `loading` çŠ¶æ€ï¼Œå‰ç«¯åº”å±•ç¤ºåŠ è½½çŠ¶æ€ï¼Œå¹¶æ˜¾ç¤ºè¿›åº¦ä¿¡æ¯ã€‚

**Q4: å¦‚ä½•åŒºåˆ†å·¥å…·è°ƒç”¨å¤±è´¥å’Œæ™®é€šé”™è¯¯ï¼Ÿ**

A: å·¥å…·è°ƒç”¨å¤±è´¥ä¼šè¿”å› `TOOL_EXECUTION_ERROR` é”™è¯¯ç ï¼Œå¹¶åœ¨ `details.tool_name` ä¸­æŒ‡æ˜å·¥å…·åç§°ã€‚

### C. è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è”ç³»æŠ€æœ¯å›¢é˜Ÿã€‚
